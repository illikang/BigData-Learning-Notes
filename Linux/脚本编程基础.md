# 脚本编程基础

## 什么是Linux脚本程序
shell scirpt（shell脚本程序）其实就是纯文本文件，我们可以编辑这个文件，然后让这个文件来帮我们一次执行多个命令，或者是利用一些运算与逻辑判断来帮我们达成某些功能。简单来说，shell脚本就是一个shell命令的集合。

## shell script编写注意事项
既然脚本文件是shell命令的集合，那么脚本文件的编写首先要符合bash命令执行的要求。另外，shell脚本作为独立执行文件，还有他自身的一些特点，现在总结如下：
  1. 命令是执行是从上而下、从左而右地分析与执行。
  2. 命令的执行就是按照bash命令的格式来进行。
  ```
  $ command [-option] parameter1 parameter2 ....
  ```
    * 区分大小写
    * 一行命令的第一个输入的部分绝对是命令或者可执行文件
    * 命令，选项，参数中间以空间区分，不论空几格，shell都视为一格
    * 按下【enter】按键后，该命令就立即执行。enter按键代表着一行命令的开始启动
    * 命令太长的时候，可以使用反斜杠（\）来转义`enter`符号，是命令连续到下一行，注意反斜杠后立刻接特殊字符，才能转义。
  3. 空白行业将被忽略掉，并且`Tab`按键所得的空白同样视为空格键。
  4. 如果读到一个Enter符号，就尝试开始执行该行（或该串）命令。
  5. `#`可作为批注。任何加在`#`后面的数据都将全部被视为批注文字而被忽略。

## script的执行
  1. 直接命令执行：shell.sh文件必须要具备可读与可执行（rx）权限，然后：
    * 绝对路径：比如使用/home/leon/shell.sh来执行命令
    * 相对路径：假设工作目录在/home/leon/,则使用./shell/sh来执行
    * 变量PATH功能：将shell.sh放在PATH指定的目录内，例如：~/bin/
  2. 以bash进程来执行：通过“bash shell.sh”或“sh shell.sh”来执行。

## script执行方式的区别
上面的直接命令执行，或者是利用bash来执行脚本，该script都会使用一个新的bash环境来执行脚本内的命令。也就是说，使用这种执行方式时，其实script是在子进程的bash内执行的。我们知道，子进程仅会继承父进程的环境变量而不会继承父进程的自定义变量，重点还在于，当子进程完成后，子进程内的各项变量或操作将会结束而不会传回到父进程中。如果想让脚本在父进程中执行，可以使用source命令。这也就是为何修改了配置文件以后，要执行source命令才能生效。
```
$ source ~/.bashrc
```
